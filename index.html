<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Math Line</title>
<style>
  :root {
    --accent-color: #ffb300;
    --bg-color: #1a0a0a;
    --text-color: #f0f0f0;
    --card-bg: linear-gradient(145deg, #2a0a0a, #1a0a0a);
    --card-glow-bg: linear-gradient(145deg, #3a0a0a, #1e1e2e);
    --header-bg: linear-gradient(90deg, #7d1a1a, #b30000, #ffb300);
    --header-text: #fff;
    --sub-text: #ffdb91;
  }

  body.dark-mode {
    --bg-color: #f0f0f0;
    --text-color: #1a0a0a;
    --card-bg: linear-gradient(145deg, #e0e0e0, #c0c0c0);
    --card-glow-bg: linear-gradient(145deg, #d0d0d0, #b0b0b0);
    --header-bg: linear-gradient(90deg, #ffb300, #b30000, #7d1a1a);
    --header-text: #1a0a0a;
    --sub-text: #333;
  }

  body {
    font-family: 'Poppins', sans-serif;
    text-align: center;
    color: var(--text-color);
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    background: var(--bg-color);
    transition: all 0.3s;
  }

  header {
    background: var(--header-bg);
    padding: 25px;
    border-bottom: 3px solid #000;
    box-shadow: 0 4px 15px rgba(0,0,0,0.7);
  }

  header h1 {
    margin: 0;
    font-size: 2.8em;
    color: var(--header-text);
    text-shadow: 0 0 15px var(--accent-color);
  }

  header p {
    color: var(--sub-text);
    font-size: 1.2em;
    margin-top: 5px;
  }

  #settings-btn {
    position: fixed;
    top: 20px;
    right: 20px;
    font-size: 24px;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--accent-color);
    z-index: 1001;
  }

  #settings-menu {
    position: fixed;
    top:0; left:0;
    width: 100%; height:100%;
    background: rgba(0,0,0,0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }

  .menu-content {
    background: var(--bg-color);
    padding: 30px;
    border-radius: 12px;
    color: var(--text-color);
    display: flex;
    flex-direction: column;
    gap: 15px;
    min-width: 250px;
  }

  .hidden { display: none; }

  #search-container {
    margin: 20px 0 0 0;
  }

  #search-input {
    padding: 10px 15px;
    width: 250px;
    font-size: 16px;
    border-radius: 8px;
    border: 2px solid var(--accent-color);
    outline: none;
    background: var(--bg-color);
    color: var(--accent-color);
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
  }

  .game-list {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 30px;
    padding: 20px;
    margin-top: 10px;
  }

  .game-card {
    position: relative;
    background: var(--card-bg);
    border: 2px solid var(--accent-color);
    border-radius: 16px;
    width: 230px;
    padding: 30px 20px;
    cursor: pointer;
    transition: transform 0.25s, box-shadow 0.25s;
    box-shadow: 0 6px 14px rgba(0,0,0,0.5);
  }

  .game-card:hover {
    transform: translateY(-8px) scale(1.03);
    box-shadow: 0 12px 25px rgba(var(--accent-color-rgb, 255,179,0),0.6), 0 0 25px var(--accent-color);
  }

  .game-card span {
    font-size: 1.3em;
    font-weight: bold;
    color: var(--accent-color);
    display: block;
    margin-top: 10px;
    text-shadow: 0 0 8px var(--header-text);
  }

  .star {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 22px;
    cursor: pointer;
    transition: transform 0.2s, color 0.2s;
  }

  .star:hover {
    transform: scale(1.3);
  }

  .favorited {
    color: var(--accent-color);
    text-shadow: 0 0 10px var(--accent-color);
  }

  .glow-card {
    background: var(--card-glow-bg);
    box-shadow: 0 0 25px var(--accent-color), 0 0 45px #b30000;
    border: 2px solid var(--accent-color);
  }

  .back-btn, .fullscreen-btn {
    display: none;
    position: fixed;
    top: 20px;
    color: var(--text-color);
    border: none;
    border-radius: 8px;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    transition: transform 0.2s, opacity 0.3s;
    z-index: 1000;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
  }

  .back-btn { left: 20px; background: linear-gradient(90deg, #b30000, #ffb300); }
  .fullscreen-btn { right: 20px; background: linear-gradient(90deg, #ffb300, #b30000); }
  .back-btn:hover, .fullscreen-btn:hover { transform: scale(1.07); opacity: 0.9; }

  iframe {
    display: none;
    width: 95%;
    height: 650px;
    margin: 0 auto;
    border: none;
    border-radius: 14px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.6);
    background: #000;
  }

  footer {
    margin-top: 60px;
    padding: 25px;
    background: var(--bg-color);
    border-top: 3px solid var(--accent-color);
    color: var(--sub-text);
    font-size: 0.95em;
    box-shadow: 0 -4px 12px rgba(0,0,0,0.5);
  }

  canvas#bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    background: transparent;
  }
</style>
</head>
<body>

<canvas id="bg"></canvas>

<header>
  <h1>Math Line</h1>
  <p>Now with favorites, search, and animated background!</p>
</header>

<button id="settings-btn">⚙️</button>

<div id="settings-menu" class="hidden">
  <div class="menu-content">
    <h2>Settings</h2>
    <label>
      <input type="checkbox" id="theme-toggle">
      Dark Mode
    </label>
    <label>
      Accent Color:
      <input type="color" id="accent-color" value="#ffb300">
    </label>
    <button id="close-settings">Close</button>
  </div>
</div>

<div id="search-container">
  <input type="text" id="search-input" placeholder="Search games..." oninput="filterGames()">
</div>

<div class="game-list" id="game-list"></div>

<button class="back-btn" id="back-btn" onclick="goBack()">⬅ Back</button>
<button class="fullscreen-btn" id="fullscreen-btn" onclick="goFullscreen()">⛶ Fullscreen</button>

<iframe id="game-frame"></iframe>

<footer>
  <p>Made with ❤️ for players</p>
</footer>

<script>
/* === PARTICLE BACKGROUND === */
const canvas = document.getElementById('bg');
const ctx = canvas.getContext('2d');
canvas.width = innerWidth;
canvas.height = innerHeight;

let particles = Array.from({ length: 70 }, () => ({
  x: Math.random() * canvas.width,
  y: Math.random() * canvas.height,
  r: Math.random() * 2 + 1,
  dx: (Math.random() - 0.5) * 0.5,
  dy: (Math.random() - 0.5) * 0.5,
  color: Math.random() > 0.5 ? 'rgba(255,179,0,0.8)' : 'rgba(179,0,0,0.8)'
}));

function animate() {
  ctx.fillStyle = 'rgba(0, 0, 0, 0.25)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  particles.forEach(p => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
    ctx.fillStyle = p.color;
    ctx.fill();
    p.x += p.dx;
    p.y += p.dy;
    if (p.x < 0 || p.x > canvas.width) p.dx *= -1;
    if (p.y < 0 || p.y > canvas.height) p.dy *= -1;
  });
  requestAnimationFrame(animate);
}
animate();

/* === GAME LOGIC === */
const games = [
  "Ragdoll archers", "Ragdoll hit", "Time shooter", "Retro bowl",
  "Snow rider", "Swords and sandals", "Crazy cattle", "Gladi hoppers",
  "Bit planes", "Final earth2", "Cluster rush", "Push your luck",
  "Poly track", "Ragdoll Soccer", "Jetpack joy ride", "Learn to fly 3",
  "Malidin stun cars", "Gun spin", "Age of war", "Moto x3m 2",
  "Moto x3m winter", "Basketball stars", "Idle breakout",
  "Vex 8", "Tiny fishing", "Drive mad", "Stick man hook", "Learn to fly 2",
  "Line rider", "Unicycle hero", "Basket random", "1v1 lol", "Happy wheels",
  "Idle dice", "Idle miner tycoon", "Johnny upgrade", "Jack smith", "Tunnel rush",
  "Duck life 5", "Duck life 
