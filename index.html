<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Math Line</title>
  <style>
    :root {
      /* ===== Christmas Palette ===== */
      --bg1: #0b1a0b;      /* Dark green background */
      --bg2: #144d14;      /* Lighter green for cards/menus */
      --bg3: #b30000;      /* Festive red accent */
      --bg4: #fffafa;      /* Snow white for cards/text */
      --accent: #ffcc00;   /* Golden highlight for buttons/borders */
      --text-color: #ffffff; /* Main text color */
      /* ===== Card settings ===== */
      --card-size: 180px;
      --card-radius: 12px;
    }

    /* layout and animated background */
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color: var(--text-color);
      background: linear-gradient(-45deg, var(--bg1), var(--bg2), var(--bg3), var(--bg4));
      background-size: 400% 400%;
      background-repeat: no-repeat;
      background-attachment: fixed;
      animation: moveBackground 18s ease infinite;
      overflow-x: hidden;
      position: relative;
      will-change: background-position, transform;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
    }

    @keyframes moveBackground {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Decorations */
    .decoration {
      position: fixed;
      pointer-events: none;
      z-index: 1;
      user-select: none;
      will-transform: transform;
    }

    /* header & top controls */
    header { padding: 20px; text-align: center; z-index: 6; position: relative; }
    header h1 { margin: 0; font-size: 2.6rem; color: var(--bg4); text-shadow: 0 2px 8px rgba(0,0,0,0.45); }

    .top-controls {
      display: flex;
      gap: 8px;
      align-items: center;
      justify-content: center;
      margin-bottom: 8px;
      padding: 0 12px;
      position: relative;
      z-index: 6;
    }

    #search-container { flex: 1; max-width: 720px; text-align: center; }
    #search-input {
      background: rgba(20,77,20,0.6);
      color: var(--text-color);
      width: 100%;
      max-width: 520px;
      padding: 8px 12px;
      font-size: 15px;
      border-radius: 8px;
      border: 2px solid rgba(255,255,255,0.06);
      outline: none;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    }

    .category-bar {
      text-align: center; 
      margin: 6px 0 12px; 
      z-index: 6; 
      position: relative;
    }

    .category-bar button {
      margin: 4px 6px;
      padding: 6px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: var(--accent);
      color: #fff;
      font-weight: 700;
      transition: transform .12s, filter .12s;
    }

    .category-bar button:hover { filter: brightness(1.05); transform: translateY(-2px); }
    .category-bar button.active { outline: 3px solid rgba(255,255,255,0.06); }

    /* game grid */
    #game-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      padding: 18px;
      position: relative;
      z-index: 6;
    }

    .game-card {
      position: relative;
      width: var(--card-size);
      height: var(--card-size);
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(10,8,6,0.45);
      border: 2px solid rgba(0,0,0,0.25);
      border-radius: var(--card-radius);
      cursor: pointer;
      color: var(--bg4);
      font-weight: 800;
      text-align: center;
      padding: 8px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.45);
      user-select: none;
      transition: transform .14s ease, box-shadow .14s ease;
    }

    .game-card:hover { transform: translateY(-6px) scale(1.02); box-shadow: 0 18px 36px rgba(0,0,0,0.55); }

    /* star favorite */
    .star {
      position: absolute; top: 8px; right: 8px;
      font-size: 18px; cursor: pointer; z-index: 8;
      color: var(--accent);
      text-shadow: 0 1px 6px rgba(0,0,0,0.5);
    }

    .star.favorited { color: #ffd36b; text-shadow: 0 1px 8px rgba(0,0,0,0.6); }

    /* request a game card */
    .request-card {
      border-color: rgba(255,200,110,0.9);
      background: linear-gradient(180deg, rgba(255,238,210,0.06), rgba(255,238,210,0.02));
      color: #fff;
      box-shadow: 0 0 12px rgba(179,89,0,0.12),
                  0 0 28px rgba(179,89,0,0.10),
                  inset 0 1px 0 rgba(255,255,255,0.02);
      animation: glowPulse 2.8s ease-in-out infinite;
      outline: 3px solid rgba(255,200,110,0.06);
    }

    @keyframes glowPulse {
      0% { box-shadow: 0 0 8px rgba(179,89,0,0.08), 0 0 20px rgba(179,89,0,0.06); transform: translateY(0); }
      50% { box-shadow: 0 0 18px rgba(179,89,0,0.22), 0 0 36px rgba(179,89,0,0.12); transform: translateY(-4px); }
      100% { box-shadow: 0 0 8px rgba(179,89,0,0.08), 0 0 20px rgba(179,89,0,0.06); transform: translateY(0); }
    }

    /* iframe game frame */
    #game-frame {
      display: none;
      width: 95%;
      max-width: 1200px;
      height: 680px;
      margin: 12px auto;
      border: none;
      border-radius: 12px;
      background: #000;
      position: relative;
      z-index: 6;
      box-shadow: 0 16px 40px rgba(0,0,0,0.6);
    }

    /* floating buttons */
    .floating-btn {
      position: fixed;
      top: 18px;
      padding: 8px 12px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      z-index: 12;
      font-weight: 700;
      box-shadow: 0 6px 16px rgba(0,0,0,0.4);
    }

    #fullscreen-btn { right: 18px; background: var(--accent); color: #fff; display: none; }
    #back-btn { left: 18px; background: rgba(0,0,0,0.55); color: #fff; display: none; }
    #settings-btn { right: 72px; background: rgba(255,255,255,0.06); color: var(--accent); font-size: 20px; }

    /* settings drawer */
    #settings-menu {
      position: fixed;
      top: 64px;
      right: -360px;
      width: 340px;
      height: calc(100% - 80px);
      background: rgba(18,12,10,0.96);
      color: #fff;
      padding: 16px;
      box-shadow: -8px 12px 40px rgba(0,0,0,0.6);
      transition: right .28s ease;
      z-index: 14;
      overflow: auto;
      border-left: 4px solid rgba(255,255,255,0.03);
    }

    #settings-menu.open { right: 12px; }
    #settings-menu h2 { margin-top: 0; }
    #settings-menu label { display: block; margin: 12px 0; }
    #settings-menu input[type="color"] { width: 100%; height: 40px; cursor: pointer; }
    #settings-menu input[type="range"] { width: 100%; }
    #settings-menu button { margin-top: 12px; padding: 8px 16px; background: var(--accent); color: #fff; border: none; border-radius: 6px; cursor: pointer; }

    /* small screens */
    @media (max-width:720px){
      header h1 { font-size: 1.8rem; }
      #settings-menu { width: 92%; height: 60%; right: -100%; top: auto; bottom: -100%; left: 4%; border-left: 0; border-radius: 10px; }
      #settings-menu.open { right: 4%; bottom: 12%; top: auto; }
      #game-frame { height: 480px; }
      :root { --card-size: 140px; }
    }
  </style>
</head>
<body>
  <header><h1>Math Line</h1></header>

  <div class="top-controls">
    <div id="search-container">
      <input id="search-input" type="search" placeholder="Search games..." aria-label="Search games">
    </div>
  </div>

  <div class="category-bar" id="category-filter" aria-label="Categories"></div>

  <div id="game-list" aria-live="polite"></div>

  <!-- Game iframe -->
  <iframe id="game-frame" title="Game frame" sandbox="allow-scripts allow-same-origin"></iframe>

  <!-- Floating controls -->
  <button id="fullscreen-btn" class="floating-btn" title="Enter fullscreen">Fullscreen</button>
  <button id="back-btn" class="floating-btn" title="Back to games">‚Üê Back</button>
  <button id="settings-btn" class="floating-btn" title="Settings">‚öôÔ∏è</button>

  <!-- Settings drawer -->
  <div id="settings-menu" aria-hidden="true">
    <h2>Settings</h2>
    <button id="close-settings-btn">Close</button>

    <label><input type="checkbox" id="toggle-decor"> Show Decorations</label>
    <label><input type="checkbox" id="toggle-anim"> Enable Animations</label>
    <label><input type="checkbox" id="reduce-motion"> Reduce Motion</label>
    <label><input type="checkbox" id="show-favorites-only"> Show Favorites Only</label>

    <h3>Color Palette</h3>
    <label>Background 1: <input type="color" id="bg1-color" value="#0b1a0b"></label>
    <label>Background 2: <input type="color" id="bg2-color" value="#144d14"></label>
    <label>Background 3: <input type="color" id="bg3-color" value="#b30000"></label>
    <label>Background 4: <input type="color" id="bg4-color" value="#fffafa"></label>
    <label>Accent Color: <input type="color" id="accent-color" value="#ffcc00"></label>
    <label>Accent Brightness: <input type="range" id="accent-brightness" min="50" max="150" value="100"></label>
  </div>

  <script>
    // ================================
    // Initial CSS variables
    // ================================
    document.documentElement.style.setProperty('--bg1', '#0b1a0b');
    document.documentElement.style.setProperty('--bg2', '#144d14');
    document.documentElement.style.setProperty('--bg3', '#b30000');
    document.documentElement.style.setProperty('--bg4', '#fffafa');
    document.documentElement.style.setProperty('--accent', '#ffcc00');
    document.documentElement.style.setProperty('--text-color', '#ffffff');

    // ================================
    // Decorations
    // ================================
    const DECO_EMOJIS = ["üéÑ","‚ùÑÔ∏è","üéÖ","‚õÑ","üéÅ","üç¨","‚ú®","üïØÔ∏è"];
    let decorations = [];
    const DECO_COUNT = 32;
    let decoAnimationEnabled = true;

    function createDecorations() {
      document.querySelectorAll('.decoration').forEach(n => n.remove());
      decorations = [];
      for (let i = 0; i < DECO_COUNT; i++) {
        const d = document.createElement('div');
        d.className = 'decoration';
        d.textContent = DECO_EMOJIS[Math.floor(Math.random() * DECO_EMOJIS.length)];
        d.style.left = (Math.random() * 110 - 5) + 'vw';
        d.style.top = (Math.random() * 110 - 5) + 'vh';
        d.style.fontSize = (16 + Math.random() * 36) + 'px';
        d.style.opacity = (0.45 + Math.random() * 0.55).toString();
        d.dataset.vy = (0.02 + Math.random() * 0.12).toString();
        d.dataset.vx = ((Math.random() - 0.5) * 0.04).toString();
        decorations.push(d);
        document.body.appendChild(d);
      }
    }
    createDecorations();

    function animateDecorations() {
      if(!decoAnimationEnabled){ requestAnimationFrame(animateDecorations); return; }
      decorations.forEach(d => {
        let top = parseFloat(d.style.top || '0');
        let left = parseFloat(d.style.left || '0');
        top += parseFloat(d.dataset.vy) * 1.1;
        left += parseFloat(d.dataset.vx) * 1.1;
        if (top > 105) top = -5;
        if (top < -10) top = 100;
        if (left > 105) left = -5;
        if (left < -10) left = 100;
        d.style.top = top + 'vh';
        d.style.left = left + 'vw';
        const rot = Math.sin((top + left) * 0.1) * 10;
        d.style.transform = `rotate(${rot}deg)`;
      });
      requestAnimationFrame(animateDecorations);
    }
    requestAnimationFrame(animateDecorations);

    function setDecorationsVisible(visible){
      decorations.forEach(d => d.style.display = visible ? '' : 'none');
    }

// Example: your games array (keep your actual games here)
const games = [
   {name:"Ragdoll Archers",url:"Ragdoll-Archers.html",category:"Action"},
      {name:"Ragdoll Hit",url:"Ragdoll-hit.html",category:"Action"},
      {name:"Time Shooter",url:"Time-shooter.html",category:"Action"},
      {name:"Retro Bowl",url:"Retro-bowl.html",category:"Sports"},
      {name:"Snow Rider",url:"Snow-Rider.html",category:"Racing"},
      {name:"Swords And Sandals",url:"Swords-and-sandlas.html",category:"Action"},
      {name:"Crazy Cattle",url:"Crazy-cattle.html",category:"Arcade"},
      {name:"Gladi Hoppers",url:"Gladi-hoppers.html",category:"Action"},
      {name:"Bit Planes",url:"Bit-planes.html",category:"Arcade"},
      {name:"Final Earth2",url:"Final-earth2.html",category:"Strategy"},
      {name:"Cluster Rush",url:"Cluster-rush.html",category:"Arcade"},
      {name:"Push Your Luck",url:"Push-your-luck.html",category:"Arcade"},
      {name:"Poly Track",url:"Poly-track.html",category:"Racing"},
      {name:"Ragdoll Soccer",url:"Ragdoll-soccer.html",category:"Sports"},
      {name:"Jetpack Joy Ride",url:"Jetpack-joy-ride.html",category:"Action"},
      {name:"Learn To Fly 3",url:"Learn-to-fly-3.html",category:"Racing"},
      {name:"Malidin Stun Cars",url:"Malidin-stun-cars.html",category:"Racing"},
      {name:"Gun Spin",url:"Gun-spin.html",category:"Action"},
      {name:"Age Of War",url:"Age-of-war.html",category:"Strategy"},
      {name:"Moto X3M 2",url:"Moto-x3m-2.html",category:"Racing"},
      {name:"Moto X3M Winter",url:"Moto-x3m-winter.html",category:"Racing"},
      {name:"Basketball Stars",url:"Basketball-stars.html",category:"Sports"},
      {name:"Idle Breakout",url:"Idle-breakout.html",category:"Arcade"},
      {name:"Vex 8",url:"Vex-8.html",category:"Action"},
      {name:"Tiny Fishing",url:"Tiny-fishing.html",category:"Simulation"},
      {name:"Drive Mad",url:"Drive-mad.html",category:"Racing"},
      {name:"Stick Man Hook",url:"Stick-man-hook.html",category:"Action"},
      {name:"Line Rider",url:"Line-rider.html",category:"Racing"},
      {name:"Unicycle Hero",url:"Unicycle-hero.html",category:"Action"},
      {name:"Basket Random",url:"Basket-random.html",category:"Sports"},
      {name:"1v1 Lol",url:"1v1-lol.html",category:"Action"},
      {name:"Happy Wheels",url:"Happy-wheels.html",category:"Action"},
      {name:"Idle Miner Tycoon",url:"Idle-miner-tycoon.html",category:"Simulation"},
      {name:"Johnny Upgrade",url:"Johnny-upgrade.html",category:"Arcade"},
      {name:"Jack Smith",url:"Jack-smith.html",category:"Action"},
      {name:"Tunnel Rush",url:"Tunnel-rush.html",category:"Racing"},
      {name:"Duck Life 5",url:"Duck-life-5.html",category:"Simulation"},
      {name:"Duck Life 4",url:"Duck-life-4.html",category:"Simulation"},
      {name:"Mob Control",url:"Mob-control.html",category:"Action"},
      {name:"A Small World Cup",url:"A-small-world-cup.html",category:"Sports"},
      {name:"Escape Road",url:"Escape-road.html",category:"Racing"},
      {name:"QWOP",url:"QWOP.html",category:"Simulation"},
      {name:"Indian Truck Simulator",url:"Indian-truck-simulator.html",category:"Simulation"},
      {name:"Doge Miner",url:"Doge-miner.html",category:"Simulation"},
      {name:"Draw Climber",url:"Draw-climber.html",category:"Racing"},
      {name:"Slope 3",url:"Slope-3.html",category:"Racing"},
      {name:"Infinte Craft",url:"Infinte-craft.html",category:"Simulation"},
      {name:"Block Blast",url:"Block-blast.html",category:"Arcade"},
      {name:"Melon playground",url:"Melon-playground.html",category:"Simulation"},
      {name:"House of hazards",url:"house-of-hazards.html",category:"Action"},
      {name:"Binding of Issac",url:"Binding-of-issac.html",category:"Action"},
      {name:"Troll Face Quest 10",url:"Troll-face-10.html",category:"Puzzle"},
      {name:"Troll Face Quest 11",url:"Troll-face-11.html",category:"Puzzle"},
      {name:"Troll Face Quest 12",url:"Troll-face-12.html",category:"Puzzle"},
      {name:"Ultimate Car Driving Simulator 3",url:"ultimate-car-simulator.html",category:"Racing"},
      {name:"Wordle",url:"Wordle.html",category:"Puzzle"},
      {name:"Cappybara Clicker",url:"Cappybara-clicker.html",category:"Simulation"},
      {name:"Bob The Robber 5",url:"bob-robber.html",category:"Action"},
      {name:"Car Crash 3D",url:"Car-crash-3d.html",category:"Racing"},
      {name:"Bit Life",url:"Bit-life.html",category:"Simulation"},
      {name:"Plants vs Zombies",url:"Plants-vs-zombies.html",category:"Action"},
      {name:"Tall Man Run",url:"tall-man-run.html",category:"Racing"},
      {name:"Tag",url:"tag.html",category:"Racing"},
      {name:"Subway Surfers Winter",url:"Subway-Winter.html",category:"Racing"},
      {name:"Subway Surfers Miami",url:"Subway-miami.html",category:"Racing"},
      {name:"Hole.io",url:"Hole-io.html",category:"Simulation"},
      {name:"Drift Boss",url:"Drift-boss.html",category:"Racing"},
      {name:"Subway Surfers Mexico",url:"Subway-mexico.html",category:"Racing"},
      {name:"Subway Surfers London",url:"Subway-london.html",category:"Racing"},
      {name:"Subway Surfers Iceland",url:"Subway-iceland.html",category:"Racing"},
      {name:"Granny 2",url:"Granny2.html",category:"Puzzle"},
      {name:"Granny 3",url:"Granny3.html",category:"Puzzle"},
      {name:"Factory Balls 2",url:"Factory-balls2.html",category:"Simulation"},
      {name:"Factory Balls 3",url:"Factory-balls3.html",category:"Simulation"},
      {name:"Geometry Dash Lite",url:"Geometry-Dash.html",category:"Racing"},
      {name:"Hardware Tycoon",url:"Hardware-tycoon.html",category:"Arcade"},
      {name:"CSGO Cliker",url:"CsGo-clicker.html",category:"Arcade"},
      {name:"Cross Road",url:"Crossy-road.html",category:"Arcade"},
      {name:"Burrito Bison",url:"BB.html",category:"Arcade"},
      {name:"Burrito Bison Launch a Libre",url:"BL.html",category:"Arcade"},
      {name:"Burrito Bison Revenge",url:"BR.html",category:"Arcade"},
      {name:"Space Waves",url:"Space-waves.html",category:"Arcade"},
      {name:"The legend of Zelda Ocarina",url:"Zelda0.html",category:"Arcade"},
      {name:"Pokemon emerald randomized",url:"PER.html",category:"Arcade"},
  {name: "Request a Game", url: "#", category: "Request", request: true}
];

// Favorites (localStorage)
const favorites = JSON.parse(localStorage.getItem('favorites') || '{}');

// DOM Elements
const gameListEl = document.getElementById('game-list');
const categoryFilterEl = document.getElementById('category-filter');
const searchInputEl = document.getElementById('search-input');
const gameFrameEl = document.getElementById('game-frame');
const fullscreenBtn = document.getElementById('fullscreen-btn');
const backBtn = document.getElementById('back-btn');
const settingsBtn = document.getElementById('settings-btn');
const settingsMenu = document.getElementById('settings-menu');
const closeSettingsBtn = document.getElementById('close-settings-btn');
const toggleDecorEl = document.getElementById('toggle-decor');
const showFavoritesOnlyEl = document.getElementById('show-favorites-only');

// ================================
// Render Category Buttons
// ================================
const categories = [...new Set(games.map(g => g.category))];
categories.forEach(cat => {
  const btn = document.createElement('button');
  btn.textContent = cat;
  btn.addEventListener('click', () => {
    document.querySelectorAll('.category-bar button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    renderGames(cat);
  });
  categoryFilterEl.appendChild(btn);
});

// ================================
// Render Games
// ================================
function renderGames(filterCategory = null) {
  const searchText = searchInputEl.value.toLowerCase();
  gameListEl.innerHTML = '';
  games.forEach(game => {
    if (filterCategory && game.category !== filterCategory) return;
    if (showFavoritesOnlyEl.checked && !favorites[game.name]) return;
    if (!game.name.toLowerCase().includes(searchText)) return;

    const card = document.createElement('div');
    card.className = 'game-card';
    if (game.request) card.classList.add('request-card');
    card.textContent = game.name;

    // Star
    const star = document.createElement('span');
    star.className = 'star' + (favorites[game.name] ? ' favorited' : '');
    star.textContent = '‚òÖ';
    star.addEventListener('click', e => {
      e.stopPropagation();
      favorites[game.name] = !favorites[game.name];
      localStorage.setItem('favorites', JSON.stringify(favorites));
      star.classList.toggle('favorited');
      renderGames(filterCategory);
    });
    card.appendChild(star);

    // Click to open game
    card.addEventListener('click', () => {
      if (game.request) { alert('Request form coming soon!'); return; }
      gameFrameEl.src = game.url;
      gameFrameEl.style.display = 'block';
      fullscreenBtn.style.display = '';
      backBtn.style.display = '';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    gameListEl.appendChild(card);
  });
}
renderGames();

// ================================
// Search
// ================================
searchInputEl.addEventListener('input', () => renderGames());

// ================================
// Back & Fullscreen
// ================================
backBtn.addEventListener('click', () => {
  gameFrameEl.style.display = 'none';
  gameFrameEl.src = '';
  fullscreenBtn.style.display = 'none';
  backBtn.style.display = 'none';
});

fullscreenBtn.addEventListener('click', () => {
  if (gameFrameEl.requestFullscreen) gameFrameEl.requestFullscreen();
});

// ================================
// Settings Drawer
// ================================
settingsBtn.addEventListener('click', () => settingsMenu.classList.toggle('open'));
closeSettingsBtn.addEventListener('click', () => settingsMenu.classList.remove('open'));

// Toggle Decorations
toggleDecorEl.addEventListener('change', e => setDecorationsVisible(e.target.checked));

// Show favorites only
showFavoritesOnlyEl.addEventListener('change', () => renderGames());

// ================================
// Color Pickers
// ================================
['bg1','bg2','bg3','bg4','accent'].forEach(id => {
  const input = document.getElementById(id+'-color');
  if (!input) return;
  input.addEventListener('input', e => {
    document.documentElement.style.setProperty(`--${id}`, e.target.value);
  });
});
  </script>
</body>
</html>

